{
  "project": "PirateWorld",
  "snapshot_version": 5,
  "last_updated": "Sprint 72.2 — Overlay Reactivity Fix",
  "fsm": {
    "controller": "src/fsm/fsmController.js",
    "states": [
      "FIRST_TIME_GPS",
      "GPS_NOMAD",
      "PORT_IDLE",
      "PORT_TRAVEL",
      "EVENT",
      "PROFILE"
    ],
    "transitions": {
      "cta_cycle": [
        "FIRST_TIME_GPS -> PORT_IDLE",
        "PORT_IDLE -> PORT_TRAVEL",
        "PORT_TRAVEL -> GPS_NOMAD"
      ]
    },
    "status": "CANON_STABLE"
  },
  "ui": {
    "architecture": "FSM-first",
    "observer_only": true,
    "routing": "manual_hash",
    "cta": {
      "exists": true,
      "visible_in_travel": true,
      "drives_fsm": true,
      "no_implicit_logic": true
    },
    "overlays": {
      "inventory": "stable_reactive",
      "crew": "read_only",
      "map_rpg": "stable_reactive",
      "menu": "read_only",
      "event": "blocking_priority"
    },
    "reactivity_model": "explicit_subscription",
    "status": "CANON_STABLE"
  },
  "backend": {
    "environment": "DEV",
    "auth": "auth.uid()",
    "mode": "read_only",
    "writes_disabled": true,
    "rpcs": {
      "rpc_get_player_summary": {
        "stable": true,
        "fields": [
          "rank",
          "title",
          "reputation_score",
          "crew_count",
          "islands_count",
          "travel_count",
          "inventory_counts"
        ]
      }
    }
  },
  "reputation": {
    "source": "reputation_score",
    "rank_system": "CANON_v1",
    "derived_fields": [
      "rank",
      "title"
    ]
  },
  "canon_docs": {
    "overlay_fsm": "/canon/overlay_fsm.md",
    "closure_rules": "/canon/closure_rules.md",
    "navigation_fsm": "/canon/navigation_fsm.md",
    "ui_states_fsm": "/canon/ui_states_fsm.md",
    "hud_contract": "/canon/hud_contract.md",
    "cta_contract": "/canon/cta_contract.md",
    "visual_system": "/canon/visual-system.md"
  },
  "canon_rules": [
    "FSM is the only source of truth",
    "UI never mutates FSM except via CTA",
    "No implicit transitions",
    "EVENT blocks all CTAs and overlays",
    "UI is observer-only",
    "UI must be null-safe in all FSM states",
    "No backend writes outside dedicated sprint",
    "No redesign without explicit sprint"
  ],
  "closed_sprints": [
    12,
    14,
    16,
    17,
    18,
    19,
    20,
    21,
    22,
    24,
    27,
    35,
    38,
    39,
    40,
    41,
    62,
    63,
    64,
    65,
    66,
    71,
    72.1
  ],
  "current_sprint": 72,
  "notes": "Se corrigió el delay de renderizado en App.jsx. Los overlays ahora son independientes del flujo de navegación (Zarpar/Atracar)."
}
